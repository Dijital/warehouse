<% @fullscreen = true %>
<% title "Changeset #{@changeset.revision}, #{h(@changeset.message)}" %>
<% unless @message -%>
<div class="changeset clearfix" id="last-log">
  <div class="cs-meta">
    <%= avatar_for(@changeset.user) %>
    <p>
      <span class="change-number"><%= link_to(@changeset.revision, changeset_path(@changeset.revision)) %></span>
    </p>
  </div>
  <div class="cs-log clearfix">      
     <%= simple_format(@changeset.message) %>
    <span class="timenauthor">by <%= @changeset.author %>, <%= jstime @changeset.changed_at %></span>
  </div>
  <ul class="changeset-nav">
    <li class="prev"><%= link_to 'Previous Changeset', previous_changeset, :class => 'back' if previous_changeset %></li>
    <li class="next"><%= link_to 'Next Changeset', next_changeset, :class => 'forward' if next_changeset %></li>
  </ul>
</div>
<% end -%>

<% if @changeset.diffable? -%>
<div id="control-center">
  <form action="/wee" id="diff-form">
  Diff this changeset:
  <select id="diff-with">
    <option value="">with...</option>
    <option value="head">with HEAD</option>
    <option value="prev">with PREV</option>
    <option value="base">with BASE</option>
    <option value="comm">with COMMITTED</option>
    <option value="date">with a specific date</option>
    <option value="numb">with another changeset</option>
  </select>
  <input id="diff-num" value="" size="6" style="display:none" />
  <span id="diff-date" style="display:none">
    <%= select_date(Date.today, :order => [:month, :day, :year]) %>
  </span>
  <input type="submit" value="Go &raquo;" id="diff-submit" style="display:none" />
  </form>
</div>
<% end -%>

<ul id="change-list">
<%= render :partial => "changes", :locals => { :changeset => @changeset, :changes => @changes } %>
</ul>

<% @changes.select(&:diffable?).each do |change| -%>
  <%= diff_for change %>
<% end -%>

<%= will_paginate @changes %>