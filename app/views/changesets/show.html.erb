<% @fullscreen = true %>
<% title "Changeset #{@changeset.revision}, #{h(@changeset.message)}" %>
<% unless @message -%>
<div class="changeset clearfix" id="last-log">
  <div class="cs-meta">
    <%= avatar_for(@changeset.user) %>
    <p>
      <span class="change-number"><%= link_to(@changeset.revision, changeset_path(@changeset.revision)) %></span>
    </p>
  </div>
  <div class="cs-log clearfix">      
     <%= simple_format(@changeset.message) %>
    <span class="timenauthor">by <%= @changeset.author %>, <%= jstime @changeset.changed_at %></span>
  </div>
  <ul class="changeset-nav">
    <li class="prev"><%= link_to 'Previous Changeset', previous_changeset, :class => 'back' if previous_changeset %></li>
    <li class="next"><%= link_to 'Next Changeset', next_changeset, :class => 'forward' if next_changeset %></li>
  </ul>
</div>
<% end -%>

<% if @changeset.diffable? -%>
<div id="control-center">
  <ul>
      <li id="cdiff"><%= link_to 'Download', formatted_changeset_path(@changeset, :diff) %></li>
      <li id="diffhead"><%= link_to 'Latest', changeset_path(current_repository.latest_changeset) %></li>
      <li id="diffnum">
        <% form_tag changesets_path, :method => :get do -%>
          <div><input type="text" name="rev" value="#" size="8" /></div>
        <% end -%>
      </li>
  </ul>
</div>
<% end -%>

<ul id="change-list">
<%= render :partial => "changes", :locals => { :changeset => @changeset, :changes => @changes } %>
</ul>

<% @changes.select(&:diffable?).each do |change| -%>
  <%= diff_for change %>
<% end -%>

<%= will_paginate @changes %>