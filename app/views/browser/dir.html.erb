<div id="last-log">
    <p>
      <span class="change-number"><%= link_to(current_revision, changeset_path(current_revision)) %></span>
      <%=h current_changeset.message %>
      <span class="message"><%= time_ago_in_words current_changeset.changed_at %> ago</span>
    </p>
    <ul class="changeset-nav">
      <%= %(<li class="prev"> #{link_to_node('back', @node, previous_changeset.revision)}</li>) if previous_changeset %>
      <%= %(<li class="next"> #{link_to_node('forward', @node, next_changeset.revision)}</li>) if @revision && next_changeset %>
    </ul>
</div>

<% if params[:paths].any? %>
<div id="crumbs"><ul class="clearfix"><%= link_to_crumbs @node.path %></li></div>
<% end %>

<table id="browser" cellspacing="0" cellpadding="0">
  <thead>
    <tr id="controls">
      <td colspan="2">
        <div class="control-head">
          <p class="controlblock">
            <!-- This is for the file browsing back/forward, not changesets... -->
          </p>
          &nbsp; <!-- Safari needs this? -->
        </div>
      </td>
    </tr>
    <tr>
      <th>File name</th>
      <th>Revision</th>
    </tr>
  </thead>
  <% @node.child_nodes.each do |node| -%>
  <tr>
    <td class="item"><%= link_to h(node.name), url_for_node(node), :class => css_class_for(node) %></td>
    <td>
      <span class="rev<% if current_repository.latest_revision == node.revision %> changed<% end %>"><%= node.revision %></span>
      Updated by <%=h node.author %> <%= time_ago_in_words node.changed_at %> ago
      <span class="log"><%= node.message %></span>
    </td>
  </tr>
  <% end -%>
</table>